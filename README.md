# Polestar Kubernetes Engine

Soliが開発・運用・保守を行っているサービス群のオンプレ環境用リポジトリ

クラスタの命名規則は以下の規則に則ったものとする。

```
${クラスタ名}-${仮想化基盤名}-${番号}
```

運用中のクラスタは以下の通りである

### okyクラスタ

N100 2台によって構成されるクラスタ  
仮想化基盤はProxmoxを採用 

- oky-pve-1 192.168.20.2
- oky-pve-2 192.168.20.3

## Terraform

VMの作成はTerraformを用いて行う  
命名規則は以下の通りである

### Kubernetes向けVM

```
pke-${クラスタ名}-${ノードロール}${番号}
```

### oky

okyクラスタ向けには以下のVMが作成される  
lbノードはHAProxy用

| VM名          | CPU コア数  | メモリ  | ディスク容量   | IPアドレス       | ホストマシン   | 
| ------------- | ---------- | ------ | ------------ | --------------- | ------------ | 
| pke-oky-lb-1  | 4          | 4GB    | 50GB         | 192.168.20.31   | oky-pve-1    | 
| pke-oky-lb-2  | 4          | 4GB    | 50GB         | 192.168.20.31   | oky-pve-2    |
| pke-oky-cp-1  | 4          | 4GB    | 50GB         | 192.168.20.51   | oky-pve-1    | 
| pke-oky-cp-2  | 4          | 4GB    | 50GB         | 192.168.20.52   | oky-pve-2    |  
| pke-oky-wk-1  | 4          | 6GB    | 50GB         | 192.168.20.101  | oky-pve-1    | 
| pke-oky-wk-2  | 4          | 6GB    | 50GB         | 192.168.20.102  | oky-pve-2    | 

![構成図](https://media.soli0222.com/polestar/d45d0d3a-19d9-442e-8458-e5738c673537.png)